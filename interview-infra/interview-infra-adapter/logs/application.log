[INFO ] [2023-12-22T05:46:01,123] [main] [AnnotationConfigContextLoaderUtils] Could not detect default configuration classes for test class [br.com.gubee.interview.web.adapter.in.hero.hero.HeroControllerEndpoint]: HeroControllerEndpoint does not declare any static, non-private, non-final, nested classes annotated with @Configuration. 
[INFO ] [2023-12-22T05:46:02,627] [main] [SpringBootTestContextBootstrapper] Found @SpringBootConfiguration br.com.gubee.interview.TestApplication for test class br.com.gubee.interview.web.adapter.in.hero.hero.HeroControllerEndpoint 
[INFO ] [2023-12-22T05:46:04,157] [main] [PullPolicy] Image pull policy will be performed by: DefaultPullPolicy() 
[INFO ] [2023-12-22T05:46:04,183] [main] [ImageNameSubstitutor] Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor') 
[INFO ] [2023-12-22T05:46:06,199] [main] [DockerClientProviderStrategy] Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first 
[INFO ] [2023-12-22T05:46:08,439] [main] [DockerClientProviderStrategy] Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine) 
[INFO ] [2023-12-22T05:46:08,446] [main] [DockerClientFactory] Docker host IP address is localhost 
[INFO ] [2023-12-22T05:46:08,597] [main] [DockerClientFactory] Connected to docker: 
  Server Version: 24.0.6
  API Version: 1.43
  Operating System: Docker Desktop
  Total Memory: 1908 MB 
[INFO ] [2023-12-22T05:46:08,751] [main] [1] Creating container for image: testcontainers/ryuk:0.5.1 
[INFO ] [2023-12-22T05:46:09,775] [main] [1] Container testcontainers/ryuk:0.5.1 is starting: b2a2d3b8cc87ca76224257aa19010ac4c75369e579305384634f18dbfccf1e34 
[INFO ] [2023-12-22T05:46:13,504] [main] [1] Container testcontainers/ryuk:0.5.1 started in PT4.7526254S 
[INFO ] [2023-12-22T05:46:13,625] [main] [RyukResourceReaper] Ryuk started - will monitor and terminate Testcontainers containers on JVM exit 
[INFO ] [2023-12-22T05:46:13,626] [main] [DockerClientFactory] Checking the system... 
[INFO ] [2023-12-22T05:46:13,630] [main] [DockerClientFactory] ✔︎ Docker server version should be at least 1.6.0 
[INFO ] [2023-12-22T05:46:13,636] [main] [postgres:12] Creating container for image: postgres:12 
[INFO ] [2023-12-22T05:46:13,916] [main] [postgres:12] Container postgres:12 is starting: 3ae4021692215afcce1edb60d1670402e007042d57ade96d77b526e567f30271 
[INFO ] [2023-12-22T05:46:21,530] [main] [postgres:12] Container postgres:12 started in PT7.8951383S 
[INFO ] [2023-12-22T05:46:21,533] [main] [postgres:12] Container is started (JDBC URL: jdbc:postgresql://localhost:65420/interview-test-service?loggerLevel=OFF) 
[INFO ] [2023-12-22T05:46:23,418] [background-preinit] [Version] HV000001: Hibernate Validator 8.0.1.Final 
[INFO ] [2023-12-22T05:46:23,880] [main] [HeroControllerEndpoint] Starting HeroControllerEndpoint using Java 17.0.6 with PID 7120 (started by marcu in C:\Users\marcu\Desktop\dg\interview-junior\interview-infra\interview-infra-adapter) 
[INFO ] [2023-12-22T05:46:23,913] [main] [HeroControllerEndpoint] The following 1 profile is active: "it" 
[INFO ] [2023-12-22T05:46:29,182] [main] [RepositoryConfigurationDelegate] Bootstrapping Spring Data JDBC repositories in DEFAULT mode. 
[INFO ] [2023-12-22T05:46:29,409] [main] [RepositoryConfigurationDelegate] Finished Spring Data repository scanning in 187 ms. Found 0 JDBC repository interfaces. 
[INFO ] [2023-12-22T05:46:33,848] [main] [TomcatWebServer] Tomcat initialized with port 0 (http) 
[INFO ] [2023-12-22T05:46:33,942] [main] [Http11NioProtocol] The ["http-nio-auto-1"] connector has been configured to support HTTP upgrade to [h2c] 
[INFO ] [2023-12-22T05:46:33,943] [main] [Http11NioProtocol] Initializing ProtocolHandler ["http-nio-auto-1"] 
[INFO ] [2023-12-22T05:46:33,957] [main] [StandardService] Starting service [Tomcat] 
[INFO ] [2023-12-22T05:46:33,959] [main] [StandardEngine] Starting Servlet engine: [Apache Tomcat/10.1.17] 
[INFO ] [2023-12-22T05:46:34,534] [main] [[/]] Initializing Spring embedded WebApplicationContext 
[INFO ] [2023-12-22T05:46:34,561] [main] [ServletWebServerApplicationContext] Root WebApplicationContext: initialization completed in 10503 ms 
[INFO ] [2023-12-22T05:46:35,636] [main] [HikariDataSource] HikariPool-1 - Starting... 
[INFO ] [2023-12-22T05:46:36,664] [main] [HikariPool] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@505a8582 
[INFO ] [2023-12-22T05:46:36,680] [main] [HikariDataSource] HikariPool-1 - Start completed. 
[INFO ] [2023-12-22T05:46:37,452] [main] [VersionPrinter] Flyway Community Edition 9.22.3 by Redgate 
[INFO ] [2023-12-22T05:46:37,454] [main] [VersionPrinter] See release notes here: https://rd.gt/416ObMi 
[INFO ] [2023-12-22T05:46:37,455] [main] [VersionPrinter]  
[INFO ] [2023-12-22T05:46:37,592] [main] [FlywayExecutor] Database: jdbc:postgresql://localhost:65420/interview-test-service (PostgreSQL 12.17) 
[INFO ] [2023-12-22T05:46:37,819] [main] [Schema] Creating schema "interview_service" ... 
[INFO ] [2023-12-22T05:46:37,853] [main] [JdbcTableSchemaHistory] Creating Schema History table "interview_service"."flyway_schema_history" ... 
[INFO ] [2023-12-22T05:46:38,104] [main] [DbMigrate] Current version of schema "interview_service": null 
[INFO ] [2023-12-22T05:46:38,127] [main] [DbMigrate] Migrating schema "interview_service" to version "1.0 - power stats ddl" 
[INFO ] [2023-12-22T05:46:38,328] [main] [DbMigrate] Migrating schema "interview_service" to version "1.1 - hero ddl" 
[INFO ] [2023-12-22T05:46:38,636] [main] [DbMigrate] Successfully applied 2 migrations to schema "interview_service", now at version v1.1 (execution time 00:00.314s) 
[INFO ] [2023-12-22T05:46:44,815] [main] [[/]] Initializing Spring TestDispatcherServlet '' 
[INFO ] [2023-12-22T05:46:44,817] [main] [TestDispatcherServlet] Initializing Servlet '' 
[INFO ] [2023-12-22T05:46:44,821] [main] [TestDispatcherServlet] Completed initialization in 4 ms 
[INFO ] [2023-12-22T05:46:45,164] [main] [Http11NioProtocol] Starting ProtocolHandler ["http-nio-auto-1"] 
[INFO ] [2023-12-22T05:46:45,324] [main] [TomcatWebServer] Tomcat started on port 65430 (http) with context path '' 
[INFO ] [2023-12-22T05:46:45,407] [main] [HeroControllerEndpoint] Started HeroControllerEndpoint in 23.592 seconds (process running for 55.034) 
[WARN ] [2023-12-22T05:46:51,216] [main] [ExceptionAdvice] PreparedStatementCallback; SQL [UPDATE hero SET     name = ?,    race = ?,    power_stats_id = ? WHERE id = ?;]; ERROR: insert or update on table "hero" violates foreign key constraint "fk_power_stats"
  Detalhe: Key (power_stats_id)=(89bed359-ad11-47dc-a3cf-53481f417442) is not present in table "power_stats". 
[WARN ] [2023-12-22T05:46:52,637] [main] [ExceptionAdvice] null 
[WARN ] [2023-12-22T05:46:53,157] [main] [ExceptionAdvice] PreparedStatementCallback; SQL [INSERT INTO hero (name, race, power_stats_id) VALUES (?, ?, ?) RETURNING id]; ERROR: insert or update on table "hero" violates foreign key constraint "fk_power_stats"
  Detalhe: Key (power_stats_id)=(e82f4730-52fc-4d19-94c1-ad61c71df9fa) is not present in table "power_stats". 
[WARN ] [2023-12-22T05:46:53,675] [main] [ExceptionAdvice] Can't find hero id 
[INFO ] [2023-12-22T05:46:55,984] [SpringApplicationShutdownHook] [HikariDataSource] HikariPool-1 - Shutdown initiated... 
[INFO ] [2023-12-22T05:46:56,002] [SpringApplicationShutdownHook] [HikariDataSource] HikariPool-1 - Shutdown completed. 
